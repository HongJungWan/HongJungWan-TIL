<br/><br/>

#### ğŸ’¡ `Mock` : ê°ì²´ì™€ ë¹„ìŠ·í•˜ê²Œ ë™ì‘í•˜ì§€ë§Œ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì§ì ‘ ê·¸ ê°ì²´ì˜ í–‰ë™ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´

#### ğŸ’¡ `Mockito` : Mock ê°ì²´ë¥¼ ì‰½ê²Œ ë§Œë“¤ê³  ê²€ì¦í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•´ ì£¼ëŠ” í”„ë ˆì„ì›Œí¬

<br/>

í˜‘ì—… í˜¹ì€ ì™¸ë¶€ API ì‚¬ìš© ì‹œ, í•´ë‹¹ ë„ë©”ì¸ APIê°€ ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì™¸ë¶€ API ë„ì…ì´ ëŠ¦ì¶°ì§€ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ì´ëŸ´ ë•Œ ì ì ˆí•œ ê°’ì„ ë°˜í™˜í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“  ë’¤ í”„ë¡ì‹œë¥¼ ì´ìš©í•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

<br/>

ê·¸ëŸ¼, í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•  ë•ŒëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ â“

ì´ ê²½ìš° `Mock í”„ë ˆì„ì›Œí¬`ë¥¼ ì´ìš©í•´ ìš”ì²­ì„ `Mocking`í•´ ì‹¤ì œ ì‘ë‹µ ê²°ê³¼ì™€ ë¹„ìŠ·í•œ ê²°ê³¼ë¥¼ ì‘ì„±í•´ì„œ ì‘ë‹µí•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.

ë˜í•œ ê°œë°œ ì¤‘ DBê°€ ì•„ì§ êµ¬ì¶•ë˜ì–´ ìˆì§€ ì•Šì„ ì‹œ, `Mockito`ì™€ ê°™ì€ `Mock í”„ë ˆì„ì›Œí¬`ë¥¼ ì´ìš©í•˜ë©´ ì•ˆì „í•˜ê³  ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.

<br/><br/>

### âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ë°”ë¼ë³´ëŠ” ì‹œê°

ê°œë°œìë§ˆë‹¤ í…ŒìŠ¤íŠ¸ ê³ ë¦½ì„± ìˆ˜ì¤€ì— ëŒ€í•´ ìƒê°ì´ ë‹¤ë¥´ë‹¤.
ëª¨ë“  ì˜ì¡´ì„±ì„ ëŠì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  ì˜ì¡´ì„±ì— ëŒ€í•´ì„œ `mocking`ì„ í•´ì•¼ í•œë‹¤ëŠ” ì˜ê²¬ë„ ìˆê³ ,
ë‹¨ìœ„ë¥¼ ìƒê°í•  ë•Œ ë‹¨ìœ„ë¥¼ ì–´ë– í•œ `í–‰ë™ì˜ ë‹¨ìœ„`ë¡œ ìƒê°í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤.

í–‰ìœ„ë¥¼ ë‹¨ìœ„ë¡œ ë³´ê¸° ë•Œë¬¸ì— í–‰ìœ„ì— ì—°ê´€ëœ ê°ì²´ë“¤ì€ ê°™ì´ í…ŒìŠ¤íŠ¸ê°€ ì§„í–‰ë¼ë„ ê´œì°®ë‹¤ê³  ìƒê°í•œë‹¤.
ì •ë‹µì€ ì—†ê¸°ì— ê°œë°œì„ ì‹œì‘í•  ë•Œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ì„œ ë‹¨ìœ„ì˜ ë²”ìœ„ì™€ Mockì„ ì–´ë””ê¹Œì§€ í•´ì•¼ í• ì§€ì— ëŒ€í•´ ë…¼ì˜í•˜ê³  ì§„í–‰í•˜ì.

<br/><br/>

## Maven ì„¤ì •

ìŠ¤í”„ë§ ë¶€íŠ¸ í™˜ê²½ì—ì„œëŠ” MockitoëŠ” ê¸°ë³¸ìœ¼ë¡œ `spring-boot-starter-test` ì˜ì¡´ì„±ì— ê°™ì´ í¬í•¨ë˜ì–´ ìˆë‹¤. ë§Œì•½ `spring-boot-starter-test`ê°€ ì—†ë‹¤ë©´ `mockito-junit-jupiter`ì™€ `mockito-core` ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì¶”ê°€í•´ ì£¼ë©´ ëœë‹¤.

```java
<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-core</artifactId>
    <version>3.1.0</version>
    <scope>test</scope>
</dependency>


<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-junit-jupiter</artifactId>
    <version>3.1.0</version>
    <scope>test</scope>
</dependency>
```

<br/>

[Mockito ë ˆí¼ëŸ°ìŠ¤](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html)

<br/><br/>

## Mock ê°ì²´

`Mock ê°ì²´`ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì€ ë©”ì„œë“œë¥¼ í†µí•œ ë°©ë²•ê³¼ ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.


### mock() ë©”ì„œë“œ ì´ìš©

```java
MemberService memberService = Mockito.mock(MemberService.class);
StudyRepository studyRepository = mock(StudyRepository.class);
```

* `Mockito í´ë˜ìŠ¤`ëŠ” static í•˜ê²Œ ì„ ì–¸í•´ì„œ ìƒëµ ê°€ëŠ¥

<br/><br/>

### @Mock ì–´ë…¸í…Œì´ì…˜ ì´ìš©

* `JUnit 5` í™•ì¥ ëª¨ë¸ë¡œ `MockitoExtension`ì„ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤.

* `MockitoExtension`ì„ í™•ì¥ ëª¨ë¸ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ `@Mock` ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

```java
@ExtendWith(MockitoExtension.class)
class StudyServiceTest {
		...
}
```

<br/>

* í•„ìš”í•œ ê³³ì— `@Mock` ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©

```java
@ExtendWith(MockitoExtension.class)
class StudyServiceTest {
		@Mock MemberService memberService;
		...
    @Test
    void createStudyService(memberService, @Mock StudyRepository studyRepository) {
        StudyService studyService = new StudyService(memberService, studyRepository);
        assertNotNull(studyService);
    }
}
```

* ì›í•˜ëŠ” ê³³ì— `@Mock` ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ `Mock ê°ì²´`ë¥¼ ë§Œë“¤ì–´ì¤„ ìˆ˜ ìˆë‹¤.
* ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ëŠ” ê³³ì— `@Mock` ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ë©´ `Mock ê°ì²´`ê°€ ìƒì„±ë˜ì–´ ì£¼ì…ëœë‹¤.

<br/><br/>

## Mock ê°ì²´ Stubbing

`Mock ê°ì²´`ë¥¼ ìƒì„±ë§Œ í•œë‹¤ë©´ ë¹ˆ ê»ë°ê¸°ì´ê¸° ë•Œë¬¸ì— ì œëŒ€ë¡œ ë™ì‘ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤.
ëª¨ë“  `Mock ê°ì²´`ì˜ ê¸°ë³¸ì ì¸ í–‰ë™ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

* Nullì„ ë°˜í™˜í•œë‹¤.
* `Primitive íƒ€ì…`ì€ ê¸°ë³¸ Primitive ê°’ì„ ë°˜í™˜í•œë‹¤.
* ì»¬ë ‰ì…˜ì€ ë¹„ì–´ìˆëŠ” ì»¬ë ‰ì…˜ì„ ë°˜í™˜í•œë‹¤.
* void ë©”ì„œë“œëŠ” ì˜ˆì™¸ë¥¼ ë˜ì§€ì§€ ì•Šê³  ì•„ë¬´ëŸ° ì¼ë„ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

<br/>

#### âœ… `Method Stub`

ê¸°ì¡´ ì½”ë“œë¥¼ í‰ë‚´ ë‚´ì–´ ì„ì‹œë¡œ ëŒ€ì¹˜í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨ **ì•„ì§ êµ¬í˜„ë˜ì§€ ì•Šì•˜ê±°ë‚˜**,
**ë…ë¦½ì ì¸ í…ŒìŠ¤íŠ¸**ë¥¼ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ” ê²½ìš° ì´ì ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

<br/><br/>

#### Mock ê°ì²´ Stubbing ì˜ˆì œ

```java
@ExtendWith(MockitoExtension.class)
class StudyServiceTest {

    @Test
    void createStudyService(@Mock MemberService memberService,
                            @Mock StudyRepository studyRepository) {
        Member member = new Member();
        member.setId(1L);
        member.setEmail("catsbi@email.com");

        when(memberService.findById(any())).thenReturn(Optional.of(member));
        doThrow(new IllegalArgumentException()).when(memberService).validate(2L);

        Optional<Member> optional = memberService.findById(1L);
        assertNotNull(optional.get());
        assertEquals(optional.get(), member);


        assertThrows(IllegalArgumentException.class, () -> memberService.validate(2L));
        
        when(memberService.findById(any()))
                .thenReturn(Optional.of(member))
                .thenThrow(new RuntimeException())
                .thenReturn(Optional.empty());

        Optional<Member> findById = memberService.findById(1L);
        assertEquals(findById.get(), member);
        assertThrows(RuntimeException.class, ()-> memberService.findById(1L));
        assertEquals(Optional.empty(), memberService.findById(1L));
    }

}
```

<br/>

#### <span style="color: #EF820D">when(memberService.findById(any())).thenReturn(Optional.of(member));</span>

* `memberService.findById` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì•ˆì— ì–´ë–¤ ê°’ì„ ë„£ì–´ë„ ë’¤ì— ì²´ì´ë‹ëœ `thenResult` ë©”ì„œë“œì— ì¸ì ê°’ìœ¼ë¡œ ì „ë‹¬í•œ `Optional.of(member)`ê°€ ë°˜í™˜ëœë‹¤.

ì—¬ê¸°ì„œ `any()`ëŠ” `ArgumentMatchers`ì—ì„œ ì œê³µí•˜ëŠ” ë©”ì„œë“œ, ë§Œì•½ ëª…ì‹œì ìœ¼ë¡œ `1L`ì´ë‚˜ `2L`ê°™ì€ ê°’ì„ ë„£ìœ¼ë©´ í•´ë‹¹ ê°’ì„ ë„£ì„ ë•Œë§Œ ì„ ì–¸í•œ ê²°ê³¼ ë°˜í™˜

<br/>

#### <span style="color: #EF820D">doThrow(new IllegalArgumentException()).when(memberService).validate(2L);</span>

* `memberService`ì—ì„œ `validate` ë©”ì„œë“œì— `2L`ì„ ì¸ìë¡œ ì „ë‹¬í•´ í˜¸ì¶œí•  ë•Œ `new IllegalArgumentException` ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤ëŠ” ê²ƒìœ¼ë¡œ ì£¼ë¡œ `void`ì™€ ê°™ì´ ë°˜í™˜ íƒ€ì…ì´ ì—†ëŠ” ë©”ì„œë“œì—ì„œ íŠ¹ì • ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ê³ ì í•  ë•Œ ì‚¬ìš©í•œë‹¤.

ë§Œì•½ ë°˜í™˜ íƒ€ì…ì´ ìˆëŠ” ë©”ì„œë“œì—ì„œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ê³ ì í•œë‹¤ë©´ `thenThrow` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

<br/>

#### <span style="color: #EF820D">when(memberService.findById(any()).thenReturn(...).thenThrow(...).thenReturn(...);</span>

* ë™ì¼í•œ ë©”ì„œë“œë¥¼ ë°˜ë³µí•´ì„œ í˜¸ì¶œí•  ë•Œ ê°ê° ë‹¤ë¥´ê²Œ í–‰ë™í•˜ë„ë¡ ì¡°ì‘í•  ìˆ˜ë„ ìˆë‹¤. ìœ„ ì½”ë“œì—ì„œëŠ” ì²« ë²ˆì§¸ í˜¸ì¶œí•  ë•ŒëŠ” ì •ìƒì ìœ¼ë¡œ ì¡°íšŒê°€ ë˜ê³  ë‘ ë²ˆì§¸ì—ëŠ” `RuntimeException` ì˜ˆì™¸ ë°œìƒ, ê·¸ë¦¬ê³  ì„¸ ë²ˆì§¸ í˜¸ì¶œ ì‹œì—ëŠ” `Optional.empty()`ê°€ ë°˜í™˜ë˜ë„ë¡ í–ˆë‹¤.

<br/>

[Argument matchers](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#3)

* Method Stubì„ í•  ë•Œ ë©”ì„œë“œì˜ íŠ¹ì • ì¸ì ê°’ì— ë°˜ì‘í•˜ê²Œ í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ì¢€ ë” ìœ ì—°í•˜ê²Œ ì¸ì ê°’ì„ ì„¤ì •í•˜ê³  ì‹¶ì„ ë•Œ `Argument matchers`ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ì–‘í•œ ì¸ì ê°’ì— ëŒ€ì²˜í•  ìˆ˜ ìˆë‹¤.

<br/><br/>

## Mock ê°ì²´ í™•ì¸

ìŠ¤í„°ë”” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆëŠ” StudyService ê°ì²´ê°€ ìˆê³ , ìŠ¤í„°ë””ë¥¼ ì €ì¥í•˜ê³  íŠ¹ì • íšŒì›ì„ í•´ë‹¹ ê°•ì˜ ê°•ì‚¬ë¡œ ë“±ë¡í•˜ëŠ” createNewStudy ë©”ì„œë“œê°€ ìˆë‹¤ê³  í•˜ì.

<br/>

`Mock ê°ì²´`ì˜ ì„ì˜ì˜ ë©”ì„œë“œ(ex: notify)ê°€ ìˆ˜í–‰ë˜ëŠ” ê²ƒì„ `íšŸìˆ˜`, `ì‹œì ` ë“±ì„ í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ â“

`Mockito`ì—ì„œëŠ” `verify`ë¼ëŠ” ë©”ì„œë“œë¥¼ í†µí•´ `Mock ê°ì²´`ì˜ ë©”ì„œë“œ í˜¸ì¶œì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

`verify`ë¼ëŠ” ë©”ì„œë“œë¥¼ ì´ìš©í•´ ë‹¨ìˆœíˆ Mock ê°ì²´ì˜ ë™ì‘ ì—¬ë¶€ë¿ ì•„ë‹ˆë¼ `ìˆœì„œë‚˜ ì‹œê°„ ë‚´ì— ì‹¤í–‰ë˜ì—ˆëŠ”ì§€`, ê·¸ë¦¬ê³  ì‹¬ì§€ì–´ `íŠ¹ì • ë©”ì„œë“œ ì‹¤í–‰ ì´í›„ Mockì´ ì‹¤í–‰ë˜ì§€ ì•Šì•˜ëŠ”ì§€`ë„ í™•ì¸ì„ í•  ìˆ˜ ìˆë‹¤.

<br/>

### StudyService.createNewStudy()

```java
public Study createNewStudy(Long memberId, Study study) {
    Optional<Member> member = memberService.findById(memberId);
    if (member.isPresent()) {
        study.setOwnerId(memberId);
    } else {
        throw new IllegalArgumentException("Member doesn't exist for id: '" + memberId + "'");
    }
    Study newstudy = repository.save(study);
    memberService.notify(newstudy);
    memberService.notify(member.get());
    return newstudy;
}
```

<br/>

### StudyServiceTest - ê¸°ë³¸ì ì¸ Mock ê°ì²´ ë™ì‘ í™•ì¸ í…ŒìŠ¤íŠ¸

```java
@ExtendWith(MockitoExtension.class)
public class StudyServiceTest {

    @DisplayName("ìŠ¤í„°ë”” ë§Œë“¤ê¸°")
    @Test
    void createNewStudy_test(@Mock StudyRepository studyRepository,
                             @Mock MemberService memberService) {
        StudyService studyService = new StudyService(memberService, studyRepository);

        Member member = new Member();
        member.setEmail("catsbi@email.com");
        member.setId(1L);

        Study study = new Study(10, "ìˆ˜í•™");
        study.setId(2L);

        when(memberService.findById(anyLong())).thenReturn(Optional.of(member));
        when(studyRepository.save(study)).thenReturn(study);

        studyService.createNewStudy(1L, study);

        assertEquals(member.getId(), study.getOwnerId());

        verify(memberService, times(1)).notify(study);
        verify(memberService, times(1)).notify(member);
        verify(memberService, never()).validate(anyLong());
    }
}
```

<br/>

#### <span style="color: #EF820D">verify(memberService, times(1)).notify(study);</span>
* memberServiceì˜ notify ë©”ì„œë“œì— study ë§¤ê°œë³€ìˆ˜ê°€ ì „ë‹¬ë˜ì–´ í˜¸ì¶œë˜ëŠ” ê²Œ 1ë²ˆì´ì–´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸

#### <span style="color: #EF820D">verify(memberService, never()).validate(anyLong());</span>
* memberServiceì˜ validate ë©”ì„œë“œê°€ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ëŠ” ë©”ì„œë“œ

<br/>

### StudyServiceTest - Mock ê°ì²´ ë™ì‘, ìˆœì„œ í™•ì¸ í…ŒìŠ¤íŠ¸

```java
@ExtendWith(MockitoExtension.class)
public class StudyServiceTestForPosting {

    @DisplayName("ìŠ¤í„°ë”” ë§Œë“¤ê¸°")
    @Test
    void createNewStudy_test(@Mock StudyRepository studyRepository,
                             @Mock MemberService memberService) {
        
				...
        InOrder inOrder = inOrder(memberService);
        inOrder.verify(memberService, times(1)).notify(study);
        inOrder.verify(memberService, times(1)).notify(member);

        verifyNoMoreInteractions(memberService);
    }
}
```

#### <span style="color: #EF820D">InOrder inOrder = inOrder(memberService);</span>
* memberServiceì˜ ë™ì‘ í™•ì¸ì„ ìˆœì„œì— ë§ì¶° í•˜ê¸° ìœ„í•´ inOrder ë©”ì„œë“œë¥¼ ì‚¬ìš©í•œë‹¤.
  ëª‡ëª‡ ë™ì‘ì— ëŒ€í•´ ìˆœì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

#### <span style="color: #EF820D">inOrder.verify(memberService, times(1)).notify(study);</span>
* memberServiceì˜ notify(study) ë©”ì„œë“œê°€ ì²˜ìŒ ìˆ˜í–‰ë¼ì•¼ í•œë‹¤.

#### <span style="color: #EF820D">inOrder.verify(memberService, times(1)).notify(member);</span>
* memberServiceì˜ notify(member) ë©”ì„œë“œê°€ ê·¸ë‹¤ìŒìœ¼ë¡œ

#### <span style="color: #EF820D">verifyNoMoreInteractions(memberService);</span>
* ìœ„ì—ì„œ í™•ì¸í•œ ë™ì‘ ì´í›„ë¡œ memberServiceì— ì–´ë– í•œ ë™ì‘ë„ ìˆì–´ì„œëŠ” ì•ˆ ëœë‹¤.

<br/><br/>

## Mockito BDD Style API

### BDD(Behavior Driven Development)

ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ "í–‰ë™" í•´ì•¼ í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ê³µí†µëœ ì´í•´ë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•.

ì¦‰, **í–‰ìœ„ ê¸°ë°˜ í…ŒìŠ¤íŠ¸**ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

Mockito í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” BddMockitoë¼ëŠ” í´ë˜ìŠ¤ë¥¼ í†µí•´ BDD ìŠ¤íƒ€ì¼ì˜ APIë„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ê°œë°œìê°€ BDD ìŠ¤íƒ€ì¼ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ì‹¶ë‹¤ë©´ í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

<br/>

### í–‰ë™(behavior)ì— ëŒ€í•œ ìŠ¤í™

* Title
* Narrative
    * As a / I want / so that
* Acceptance criteria
    * Given / When / Then

<br/>

### ì–´ë–»ê²Œ ë³€í•˜ëŠ”ê°€ â“

```java
ğŸ’¡
ê¸°ì¡´ : when(memberService.findById(1L)).thenReturn(Optional.of(member));
ë³€ê²½ : given(memberService.findById(1L)).willReturn(Optional.of(member));
```

```java
ğŸ’¡
ê¸°ì¡´ : verify(memberService, times(1)).notify(study);
ë³€ê²½ : then(memberService).should(times(1)).notify(study);
```

<br/>

```java

@ExtendWith(MockitoExtension.class)
public class StudyServiceTestForPosting {
    @Mock StudyRepository studyRepository;
    @Mock MemberService memberService;
    
    @DisplayName("ìŠ¤í„°ë”” ë§Œë“¤ê¸°")
    @Test
    void createNewStudy_test() {
        //given
        StudyService studyService = new StudyService(memberService, studyRepository);

        Member member = new Member();
        member.setEmail("catsbi@email.com");
        member.setId(1L);

        Study study = new Study(10, "ìˆ˜í•™");
        study.setId(2L);

        given(memberService.findById(anyLong())).willReturn(Optional.of(member));
        given(studyRepository.save(study)).willReturn(study);

        //when
        studyService.createNewStudy(1L, study);

        //then
        assertEquals(member.getId(), study.getOwnerId());
        then(memberService).should(times(1)).notify(study);
        then(memberService).should(times(1)).notify(member);
        then(memberService).shouldHaveNoMoreInteractions();

    }
}
```